(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(16),c=n.n(a),u=n(7),r=n(3),o=n(1),i=n(0),l=function(e){return Object(i.jsxs)("div",{children:[e.name," ",e.number," ",Object(i.jsx)("button",{value:e.id,name:e.name,onClick:e.onClick,children:"Delete"})]})},s=function(e){return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:e.addContact,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})})},d=function(e){return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{value:e.value,onChange:e.onChange})]})},j=n(4),b=n.n(j),m="https://puhelinluettelo-fso21-app.herokuapp.com/api/persons",h={getAll:function(){return b.a.get(m).then((function(e){return e.data}))},create:function(e){return b.a.post(m,e).then((function(e){return e.data}))},remove:function(e){return b.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return b.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))}},f=function(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)(""),j=Object(r.a)(c,2),b=j[0],m=j[1],f=Object(o.useState)(""),p=Object(r.a)(f,2),O=p[0],v=p[1],g=Object(o.useState)(!0),x=Object(r.a)(g,2),C=x[0],w=x[1],N=Object(o.useState)(""),S=Object(r.a)(N,2),k=S[0],U=S[1],y=Object(o.useState)(null),D=Object(r.a)(y,2),T=D[0],A=D[1],E=Object(o.useState)(null),I=Object(r.a)(E,2),J=I[0],B=I[1],P=function(){h.getAll().then((function(e){a(e)}))};Object(o.useEffect)(P,[]);var W=function(e){var t=window.confirm("Delete "+e.target.name+" ?"),n=e.target.value;t&&h.remove(n).then(P),A("Deleted ".concat(e.target.name)),setTimeout((function(){A(null)}),5e3)},q=C?n:n.filter((function(e){return e.name.toUpperCase().startsWith(k.toUpperCase())})),z=function(e){var t=e.message;return null===t?null:Object(i.jsx)("div",{className:"notification",children:t})},F=function(e){var t=e.message;return null===t?null:Object(i.jsx)("div",{className:"errorNotification",children:t})};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(z,{message:T}),Object(i.jsx)(F,{message:J}),Object(i.jsx)(d,{value:k,onChange:function(e){U(e.target.value),""===e.target.value?w(!0):w(!1)}}),Object(i.jsx)("h1",{children:"add a new"}),Object(i.jsx)(s,{addContact:function(e){e.preventDefault();var t={name:b,number:O};if(n.map((function(e){return e.name.toUpperCase()})).includes(t.name.toUpperCase())){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var c=n.find((function(e){return e.name.toUpperCase()===t.name.toUpperCase()})),r=Object(u.a)(Object(u.a)({},c),{},{number:t.number}),o=c.id;h.update(o,r).then((function(e){a(n.map((function(t){return t.id!==o?t:e}))),A("Successfully Updated the phone number of ".concat(c.name)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){B("Information of ".concat(c.name," has already been deleted from the server")),setTimeout((function(){B(null)}),5e3),a(n.filter((function(e){return e.id!==o})))}))}}else h.create(t).then((function(e){a(n.concat(e)),m(""),v("")})),A("Added ".concat(t.name)),setTimeout((function(){A(null)}),5e3)},newName:b,handleNameChange:function(e){m(e.target.value)},newNumber:O,handleNumberChange:function(e){v(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),q.map((function(e){return Object(i.jsx)(l,{id:e.id,name:e.name,number:e.number,onClick:W},e.id)}))]})};n(41);c.a.render(Object(i.jsx)(f,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.f0d05ee6.chunk.js.map