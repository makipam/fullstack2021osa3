(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var a=t(16),c=t.n(a),u=t(7),r=t(3),i=t(1),o=t(0),l=function(e){return Object(o.jsxs)("div",{children:[e.name," ",e.number," ",Object(o.jsx)("button",{value:e.id,name:e.name,onClick:e.onClick,children:"Delete"})]})},s=function(e){return Object(o.jsx)("div",{children:Object(o.jsxs)("form",{onSubmit:e.addContact,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})})},d=function(e){return Object(o.jsxs)("div",{children:["filter shown with ",Object(o.jsx)("input",{value:e.value,onChange:e.onChange})]})},j=t(4),b=t.n(j),m="/api/persons",h={getAll:function(){return b.a.get(m).then((function(e){return e.data}))},create:function(e){return b.a.post(m,e).then((function(e){return e.data}))},remove:function(e){return b.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return b.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))}},f=function(){var e=Object(i.useState)([]),n=Object(r.a)(e,2),t=n[0],a=n[1],c=Object(i.useState)(""),j=Object(r.a)(c,2),b=j[0],m=j[1],f=Object(i.useState)(""),O=Object(r.a)(f,2),p=O[0],v=O[1],g=Object(i.useState)(!0),x=Object(r.a)(g,2),C=x[0],w=x[1],N=Object(i.useState)(""),S=Object(r.a)(N,2),k=S[0],U=S[1],y=Object(i.useState)(null),D=Object(r.a)(y,2),T=D[0],A=D[1],E=Object(i.useState)(null),I=Object(r.a)(E,2),J=I[0],B=I[1],P=function(){h.getAll().then((function(e){a(e)}))};Object(i.useEffect)(P,[]);var W=function(e){var n=window.confirm("Delete "+e.target.name+" ?"),t=e.target.value;n&&h.remove(t).then(P),A("Deleted ".concat(e.target.name)),setTimeout((function(){A(null)}),5e3)},q=C?t:t.filter((function(e){return e.name.toUpperCase().startsWith(k.toUpperCase())})),z=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"notification",children:n})},F=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"errorNotification",children:n})};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(z,{message:T}),Object(o.jsx)(F,{message:J}),Object(o.jsx)(d,{value:k,onChange:function(e){U(e.target.value),""===e.target.value?w(!0):w(!1)}}),Object(o.jsx)("h1",{children:"add a new"}),Object(o.jsx)(s,{addContact:function(e){e.preventDefault();var n={name:b,number:p};if(t.map((function(e){return e.name.toUpperCase()})).includes(n.name.toUpperCase())){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var c=t.find((function(e){return e.name.toUpperCase()===n.name.toUpperCase()})),r=Object(u.a)(Object(u.a)({},c),{},{number:n.number}),i=c.id;h.update(i,r).then((function(e){a(t.map((function(n){return n.id!==i?n:e}))),A("Successfully Updated the phone number of ".concat(c.name)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){B("Information of ".concat(c.name," has already been deleted from the server")),setTimeout((function(){B(null)}),5e3),a(t.filter((function(e){return e.id!==i})))}))}}else h.create(n).then((function(e){a(t.concat(e)),m(""),v(""),A("Added ".concat(n.name))})).catch((function(e){A(e)})),setTimeout((function(){A(null)}),5e3)},newName:b,handleNameChange:function(e){m(e.target.value)},newNumber:p,handleNumberChange:function(e){v(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers:"}),q.map((function(e){return Object(o.jsx)(l,{id:e.id,name:e.name,number:e.number,onClick:W},e.id)}))]})};t(41);c.a.render(Object(o.jsx)(f,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.c6f8c67c.chunk.js.map