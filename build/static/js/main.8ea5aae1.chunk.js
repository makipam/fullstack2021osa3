(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var a=t(16),c=t.n(a),u=t(7),r=t(3),o=t(1),i=t(0),s=function(e){return Object(i.jsxs)("div",{children:[e.name," ",e.number," ",Object(i.jsx)("button",{value:e.id,name:e.name,onClick:e.onClick,children:"Delete"})]})},l=function(e){return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:e.addContact,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})})},d=function(e){return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{value:e.value,onChange:e.onChange})]})},j=t(4),b=t.n(j),m="/api/persons",f={getAll:function(){return b.a.get(m).then((function(e){return e.data}))},create:function(e){return b.a.post(m,e).then((function(e){return e.data}))},remove:function(e){return b.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return b.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))}},h=function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],a=n[1],c=Object(o.useState)(""),j=Object(r.a)(c,2),b=j[0],m=j[1],h=Object(o.useState)(""),O=Object(r.a)(h,2),p=O[0],v=O[1],g=Object(o.useState)(!0),x=Object(r.a)(g,2),C=x[0],w=x[1],N=Object(o.useState)(""),S=Object(r.a)(N,2),k=S[0],U=S[1],y=Object(o.useState)(null),T=Object(r.a)(y,2),D=T[0],A=T[1],E=Object(o.useState)(null),I=Object(r.a)(E,2),J=I[0],B=I[1],P=function(){f.getAll().then((function(e){a(e)}))};Object(o.useEffect)(P,[]);var W=function(e){var n=window.confirm("Delete "+e.target.name+" ?"),t=e.target.value;n&&f.remove(t).then(P),A("Deleted ".concat(e.target.name)),setTimeout((function(){A(null)}),5e3)},q=C?t:t.filter((function(e){return e.name.toUpperCase().startsWith(k.toUpperCase())})),z=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"notification",children:n})},F=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"errorNotification",children:n})};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(z,{message:D}),Object(i.jsx)(F,{message:J}),Object(i.jsx)(d,{value:k,onChange:function(e){U(e.target.value),""===e.target.value?w(!0):w(!1)}}),Object(i.jsx)("h1",{children:"add a new"}),Object(i.jsx)(l,{addContact:function(e){e.preventDefault();var n={name:b,number:p};if(t.map((function(e){return e.name.toUpperCase()})).includes(n.name.toUpperCase())){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var c=t.find((function(e){return e.name.toUpperCase()===n.name.toUpperCase()})),r=Object(u.a)(Object(u.a)({},c),{},{number:n.number}),o=c.id;f.update(o,r).then((function(e){a(t.map((function(n){return n.id!==o?n:e}))),A("Successfully Updated the phone number of ".concat(c.name)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){B("Information of ".concat(c.name," has already been deleted from the server")),setTimeout((function(){B(null)}),5e3),a(t.filter((function(e){return e.id!==o})))}))}}else f.create(n).then((function(e){a(t.concat(e)),m(""),v(""),A("Added ".concat(n.name)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){console.log(e.response.data.error),B(e.response.data.error),setTimeout((function(){B(null)}),5e3)}))},newName:b,handleNameChange:function(e){m(e.target.value)},newNumber:p,handleNumberChange:function(e){v(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers:"}),q.map((function(e){return Object(i.jsx)(s,{id:e.id,name:e.name,number:e.number,onClick:W},e.id)}))]})};t(41);c.a.render(Object(i.jsx)(h,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.8ea5aae1.chunk.js.map